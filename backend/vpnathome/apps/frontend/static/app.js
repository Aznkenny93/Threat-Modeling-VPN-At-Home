(function(e){function t(t){for(var n,r,o=t[0],l=t[1],c=t[2],d=0,v=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&v.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(v.length)v.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==s[l]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},s={app:0},a=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"17c6":function(e,t,i){},"21bb":function(e,t,i){"use strict";var n=i("7a98"),s=i.n(n);s.a},"2c4c":function(e,t,i){"use strict";var n=i("3df2"),s=i.n(n);s.a},"2cfd":function(e,t,i){"use strict";var n=i("e07e"),s=i.n(n);s.a},"367e":function(e,t,i){},"3de0":function(e,t,i){"use strict";var n=i("bc50"),s=i.n(n);s.a},"3df2":function(e,t,i){},4678:function(e,t,i){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="4678"},"4cb7":function(e,t,i){"use strict";var n=i("17c6"),s=i.n(n);s.a},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("f751"),i("097d"),i("1157"),i("c86c"),i("87ee");var n,s,a,r,o,l,c=i("2b0e"),u=i("1dce"),d=i.n(u),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[e.$route.meta.noNavbar?e._e():i("NavigationBar"),i("div",{staticClass:"ui container"},[i("router-view")],1)],1)},f=[],m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"ui top fixed menu"},[i("div",{staticClass:"ui container"},[i("router-link",{staticClass:"item",attrs:{"active-class":"active",to:"/",exact:""}},[i("i",{staticClass:"icon home"}),e._v(" Home")]),e.isSuperuser?i("router-link",{staticClass:"item",attrs:{"active-class":"active",to:"/settings",exact:""}},[i("i",{staticClass:"icon cog"}),e._v(" Settings")]):e._e(),e.isSuperuser?i("a",{staticClass:"item",attrs:{href:"/admin/"}},[i("i",{staticClass:"icon cogs"}),e._v(" Admin")]):e._e(),e._m(0),e._m(1),i("div",{staticClass:"right menu"},[i("div",{staticClass:"ui item"},[i("span",{class:{superuser:e.isSuperuser}},[i("b",[e._v(e._s(e.email))])])]),i("div",{staticClass:"ui item no-padding-right"},[i("div",{staticClass:"ui primary button icon compact negative",on:{click:e.onClickedLogout}},[i("i",{staticClass:"icon sign-out"})])])])],1)])},p=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticClass:"item",attrs:{href:"https://www.vultr.com/?ref=7515725",target:"_blank"}},[i("i",{staticClass:"icon server"}),e._v(" Vultr")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticClass:"item",attrs:{href:"https://www.patreon.com/ezaquarii",target:"_blank"}},[i("i",{staticClass:"icon patreon"}),e._v(" Support Us")])}],h=i("d225"),b=i("b0b4"),g=i("308d"),_=i("6bb5"),y=i("4e2b"),j=i("60a3"),C=(n=Object(j["a"])({name:"NavigationBar",components:{}}),n(s=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"onClickedLogout",value:function(){this.$api.logout(this.onLogoutCompleted.bind(this))}},{key:"onLogoutCompleted",value:function(){this.$store.commit("logout"),this.$router.push({path:"/login"})}},{key:"isSuperuser",get:function(){return this.$store.getters.isSuperuser}},{key:"email",get:function(){return this.$store.state.user.email}}]),t}(j["b"]))||s),k=C,O=(i("a997"),i("2877")),w=Object(O["a"])(k,m,p,!1,null,"604a0981",null),S=w.exports,$={components:{NavigationBar:S},created:function(){this.$store.getters.isAuthenticated&&this.$store.dispatch("hydrate")}},E=$,D=(i("5c0b"),Object(O["a"])(E,v,f,!1,null,null,null)),x=D.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui grid center aligned"},[e._m(0),e._m(1),i("div",{staticClass:"row"},[i("div",{staticClass:"ten wide column left aligned"},[i("div",{staticClass:"issue"},[i("div",{staticClass:"para"},[e._v("\n                    Default, sane config can be bootstrapped with a single "),i("span",{staticClass:"shell"},[e._v("init.sh")]),e._v(" command.\n                    Make sure you run it in the application working directory and as the application user:\n                    "),i("div",{staticClass:"example"},[e._v("\n                        $ whoami"),i("br"),e._v("\n                        "+e._s(e.user)),i("br"),e._v("\n                        $ cd "+e._s(e.workingDir)),i("br"),e._v("\n                        $ "+e._s(e.initSh)),i("br")])]),i("div",{staticClass:"para"},[e._v("\n                Application is initialized in "),i("span",{staticClass:"shell"},[e._v(e._s(e.workingDir)+"/data")]),e._v(", which will contain\n                everything the app needs to run. If you want to perform manual configuration, please follow the guide below.\n                Don't forget that "),i("span",{staticClass:"important"},[e._v("you need to restart the server")]),e._v(" to reload updated config.\n                ")]),i("div",{staticClass:"para"},[e._v("\n                    You can activate "),i("i",[e._v("virtual environement")]),e._v(" to save yourself typing full paths:\n                    "),i("div",{staticClass:"example"},[e._v("\n                        $ source "+e._s(e.virtualEnvDir)+"/bin/activate"),i("br"),e._v("\n                        (env) $ manage.py"),i("br"),e._v("\n                        ...\n                    ")])])]),i("div",{staticClass:"issue"},[e._m(2),e._v("\n                Here are some facts that you might find useful when trouble-shooting the app installation:\n                "),i("div",[i("table",{staticClass:"ui very basic collapsing celled table"},[i("tbody",[i("tr",[e._m(3),i("td",[e._v(e._s(e.user))])]),i("tr",[e._m(4),i("td",[e._v(e._s(e.workingDir))])]),i("tr",[e._m(5),i("td",[e._v(e._s(e.workingDir)+"/data")])]),i("tr",[e._m(6),i("td",[e._v(e._s(e.virtualEnvDir))])]),i("tr",[e._m(7),i("td",[e._v(e._s(e.virtualEnvDir)+"/bin")])])])])]),i("div",{staticClass:"para"},[e._v("\n                    Data directory contains everything you need to backup and restore application state. Just\n                    copy it and keep safe. When you move the app to a new place, just restore it and you'll be\n                    ready to go. No fancy database dump/restoration is needed.\n                ")])]),i("div",{staticClass:"issue"},[e.hasSettingsFile?i("div",[e._m(8),e._m(9)]):i("div",[e._m(10),i("div",[e._v("\n                      OpenVPN@Home is configured through a JSON "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" file placed in deployment\n                      directory. File can be generated with a management command:\n                      "),i("p",{staticClass:"example"},[e._v("\n                        $ "+e._s(e.virtualEnvDir)+"/bin/manage.py configure"),i("br"),e._v("\n                        cat data/settings.json\n                      ")]),e._v("\n                      You can also check "),i("span",{staticClass:"shell"},[e._v("manage.py configure --help")]),e._v(" for details.\n                    ")])])]),i("div",{staticClass:"issue"},[e.isEmailConfigured?i("div",[e._m(11),e.isEmailEnabled?i("p",[e._v("E-mail is "),i("span",{staticClass:"green bold"},[e._v("enabled")]),e._v(" and configured.")]):i("p",[e._v("E-mail is "),i("span",{staticClass:"red bold"},[e._v("disabled.")]),e._v(" You won't receive error logs nor you can send config files.")])]):i("div",[e._m(12),e._m(13)])]),i("div",{staticClass:"issue"},[e.isDatabaseInitialized?i("div",[e._m(14),i("p",[e._v("\n                        Database is initialized and up-to-date.\n                    ")])]):i("div",[e._m(15),i("div",[e._v("\n                        Database must be initialized (migrated) before the app is usable. Use standard Django migration utility.\n                        "),i("div",{staticClass:"example"},[e._v("\n                            $ "+e._s(e.virtualEnvDir)+"/bin/manage.py migrate\n                        ")])])])]),i("div",{staticClass:"issue"},[e.hasAdminUser?i("div",[e._m(16),i("p",[e._v("\n                        Admin user is configured, has a password and is activated.\n                    ")])]):i("div",[e._m(17),i("div",[e._v("\n                        Admin user is a must. You want to use your real e-mail address and sane password for this one.\n                        "),i("div",{staticClass:"example"},[e._v("\n                            $ "+e._s(e.virtualEnvDir)+"/bin/manage.py set_admin my@email.com my-secret-password\n                        ")])])])]),i("div",{staticClass:"issue"},[e.isConfigured?i("div",[e._m(18),i("p",[e._v("Settings file is reviewed and accepted.")])]):i("div",[e._m(19),e._m(20)])])])])])},N=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h1",{staticClass:"title"},[e._v("Welcome to VPN@Home")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h3",[e._v("The app requires some configuration")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted info icon",attrs:{"aria-hidden":"true"}}),e._v(" Orientation")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("User running the app")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("Working directory")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("App data directory")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("Python virtual environment")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("App supplied scripts")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Has settings file")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[e._v("\n                        Configuration file "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" is present in th deployment directory.\n                    ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" No settings file yet")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" E-mail configured")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" You must configure e-mail")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n                        E-mail is "),i("span",{staticClass:"green bold"},[e._v("enabled")]),e._v(" but not fully configured yet. If you don't want to use\n                        e-mail, set "),i("span",{staticClass:"shell"},[e._v("enabled")]),e._v(" to "),i("span",{staticClass:"shell"},[e._v("false")]),e._v(" and you can skip the configuration.\n                        Open "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" and fill email related fields:\n                        "),i("div",{staticClass:"example"},[e._v("\n                            {"),i("br"),e._v("  ..."),i("br"),e._v('\n                                  "email": {'),i("br"),e._v('\n                                    "enabled": '),i("i",[e._v("true / false")]),e._v(","),i("br"),e._v('\n                                    "server_from": '),i("i",[e._v("e-mail showing in From:")]),e._v(","),i("br"),e._v('\n                                    "admin_emails": '),i("i",[e._v("[list of e-mails to send crash logs to]")]),i("br"),e._v('\n                                    "smtp": {'),i("br"),e._v('\n                                      "server": '),i("i",[e._v('"your.smtp.host"')]),e._v(","),i("br"),e._v('\n                                      "port": '),i("i",[e._v("TLS port")]),e._v(","),i("br"),e._v('\n                                      "user": '),i("i",[e._v("most likely your e-mail address")]),e._v(","),i("br"),e._v('\n                                      "password": '),i("i",[e._v("password")]),e._v(","),i("br"),e._v("\n                                    }"),i("br"),e._v("\n                              ..."),i("br"),e._v("}\n                        ")]),e._v("\n                        Your "),i("span",{staticClass:"shell"},[e._v("server_from")]),e._v(" should be set to a valid e-mail address. Many SMTP servers\n                        will refuse to send e-mail with bogus "),i("i",[e._v("From")]),e._v(" field. "),i("span",{staticClass:"important"},[e._v("You must restart the service to pick up new configuration.")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Database is ready")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" Database is not initialized (migrated) yet")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Admin user is configured")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" Admin user is not configured yet")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Settings reviewed and accepted")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" You must review and accept settings first")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n                        Settings file must be reviewed and accepted before proceeding. Open "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" in\n                        your favorite editor and set "),i("span",{staticClass:"shell"},[e._v("configured")]),e._v(" flag to "),i("span",{staticClass:"shell"},[e._v("true")]),e._v(".\n                        Most interesting part is your "),i("span",{staticClass:"shell"},[e._v("email")]),e._v(" section.\n                        "),i("div",{staticClass:"example"},[e._v("\n                            {"),i("br"),e._v("  ..."),i("br"),e._v('  "configured": "true"'),i("br"),e._v("  ..."),i("br"),e._v('  "email": { ... }'),i("br"),e._v("  ..."),i("br"),e._v("}\n                        ")])])}],A={computed:{hasSettingsFile:function(){return this.$store.state.status.appNotReady.has_settings_file},isConfigured:function(){return this.$store.state.status.appNotReady.is_configured&&this.hasSettingsFile},isDatabaseInitialized:function(){return this.$store.state.status.appNotReady.is_migrated},managePy:function(){return this.$store.state.status.appNotReady.manage_py},initSh:function(){return this.$store.state.status.appNotReady.init_sh},deploymentDir:function(){return this.$store.state.status.appNotReady.deployment_dir},hasAdminUser:function(){return this.$store.state.status.appNotReady.has_active_admin},isEmailConfigured:function(){return this.$store.state.status.appNotReady.is_email_configured},isEmailEnabled:function(){return this.$store.state.status.appNotReady.is_email_enabled},virtualEnvDir:function(){return this.$store.state.status.appNotReady.virtual_env},workingDir:function(){return this.$store.state.status.appNotReady.working_dir},user:function(){return this.$store.state.status.appNotReady.user}}},R=A,V=(i("3de0"),Object(O["a"])(R,P,N,!1,null,"5c2c2f16",null)),L=V.exports,F=i("8c4f"),U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[i("div",{staticClass:"info"},[i("sui-message",{attrs:{info:""}},[e._v("\n                Check your SSH deployment key in "),i("span",[i("i",{staticClass:"icon cog"}),i("b",[e._v("Settings")]),i("i",{staticClass:"icon arrow right"}),i("b",[e._v("SSH keys")])]),e._v(".\n            ")])],1),e.isSuperuser?i("ConfigList",{attrs:{title:"OpenVPN Servers",items:e.servers,emailEnabled:e.emailEnabled,deploymentEnabled:!0,isServer:!0,onClickedAdd:e.onClickedAddServer}}):e._e(),i("ConfigList",{attrs:{title:"OpenVPN Clients",items:e.clients,emailEnabled:e.emailEnabled,deploymentEnabled:!0,isClient:!0,addDisabled:!e.$store.getters.hasServer,onClickedAdd:e.onClickedAddClient}}),i("NewServerDialog",{ref:"newServerDialog"}),i("NewClientDialog",{ref:"newClientDialog"}),i("DeploymentDialog",{ref:"deploymentDialog"}),i("DeleteServerDialog",{ref:"deleteServerDialog"})],1)])},z=[],M=i("013f"),T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"config-table"},[i("table",{staticClass:"ui celled striped table"},[i("col",{attrs:{width:"40%"}}),i("col",{attrs:{width:"15%"}}),i("col",{attrs:{width:"15%"}}),i("col",{attrs:{width:"25%"}}),i("col",{attrs:{width:"5%"}}),i("thead",[i("tr",[i("th",[e._v(e._s(e.title))]),i("th",[e._v("Created")]),i("th",[e._v("Expires")]),i("th",[e._v("E-Mail")]),i("th",[i("sui-button",{class:{disabled:e.addDisabled},attrs:{circular:"",size:"mini",color:"green",icon:"plus"},on:{click:e.onClickedAdd}})],1)])]),i("tbody",e._l(e.items,(function(t){return i("ConfigListItem",{key:t.id,attrs:{item:t,emailEnabled:e.emailEnabled,deploymentEnabled:e.deploymentEnabled,isClient:e.isClient,isServer:e.isServer}})})),1)])])},q=[],H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",[e.isServer?i("td",[e._v(e._s(e.item.name))]):e.isClient?i("td",[e._v("\n        "+e._s(e.item.name)+" @ "+e._s(e.item.server_name)+"\n    ")]):i("td",[e._v("id:"+e._s(e.item.id))]),i("td",[e._v(e._s(e.relativeCreated))]),i("td",[e._v(e._s(e.relativeValid))]),i("td",[e._v(e._s(e.item.email))]),i("td",{staticClass:"center"},[i("sui-dropdown",{staticClass:"icon",attrs:{icon:"ellipsis vertical"}},[i("sui-dropdown-menu",[i("a",{staticClass:"item",attrs:{href:e.item.download_url}},[i("sui-icon",{attrs:{name:"download"}}),e._v("Download config\n                ")],1),e.emailEnabled&&e.canSendEmail&&e.isClient?i("sui-dropdown-item",{on:{click:e.onSendMailClicked}},[i("sui-icon",{attrs:{name:"mail"}}),e._v("Send via e-mail\n                ")],1):e._e(),e.deploymentEnabled&&e.canDeploy?i("sui-dropdown-item",{on:{click:e.onDeployClicked}},[i("sui-icon",{attrs:{name:"play"}}),e._v("Deploy to server\n                ")],1):e._e(),e.isServer?i("sui-dropdown-item",{on:{click:e.onDeleteClicked}},[i("sui-icon",{attrs:{name:"trash"}}),e._v("Delete\n                ")],1):e._e()],1)],1)],1)])},K=[],B=i("c1df"),I=i.n(B),J=i("2ef0"),Y=i.n(J),W="clicked_deploy_server",G="clicked_delete_server",X=(a=Object(j["a"])({name:"ConfigListItem",props:["item","emailEnabled","deploymentEnabled","isClient","isServer"]}),a(r=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"onSendMailClicked",value:function(){this.$store.dispatch("sendClientConfigEmail",this.item.id)}},{key:"onDeployClicked",value:function(){this.$root.$emit(W,this.item)}},{key:"onDeleteClicked",value:function(){this.$root.$emit(G,this.item)}},{key:"relativeCreated",get:function(){return I()(this.item.created).fromNow()}},{key:"relativeValid",get:function(){return I()(this.item.validity_end).fromNow()}},{key:"isSending",get:function(){return this.$store.getters.isSendingClientConfigEmail(this.item.id)}},{key:"canSendEmail",get:function(){return this.$store.getters.canSendEmail(this.item.email)}},{key:"canDeploy",get:function(){return Y.a.has(this.item,"network")}}]),t}(j["b"]))||r),Q=X,Z=(i("b007"),Object(O["a"])(Q,H,K,!1,null,"b732f2ca",null)),ee=Z.exports,te=(o=Object(j["a"])({name:"ConfigList",props:["items","title","emailEnabled","deploymentEnabled","isClient","isServer","addDisabled","onClickedAdd"],components:{ConfigListItem:ee}}),o(l=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),t}(j["b"]))||l),ie=te,ne=(i("4cb7"),Object(O["a"])(ie,T,q,!1,null,"4002db2e",null)),se=ne.exports,ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("New OpenVPN Server")]),i("sui-modal-content",[i("sui-container",[e.open?i("NewServerForm",{ref:"form",on:{formUpdated:e.onFormUpdated}}):e._e()],1)],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:"",disabled:!e.isValid},on:{click:e.onAccept}},[e._v("OK")]),i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},re=[],oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("label",[e._v("Server Name")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{placeholder:"Ex. 'My Home Server'",type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"fields"},[i("div",{staticClass:"twelve wide field"},[i("label",[e._v("Server Host Address")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.hostname,expression:"form.hostname"}],attrs:{placeholder:"Ex. myvpn.net or 192.168.1.1",type:"text"},domProps:{value:e.form.hostname},on:{input:function(t){t.target.composing||e.$set(e.form,"hostname",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"four wide field"},[i("label",[e._v("Port")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.port,expression:"form.port"}],attrs:{min:"1",max:"65535",type:"number"},domProps:{value:e.form.port},on:{input:function(t){t.target.composing||e.$set(e.form,"port",t.target.value)}}})])]),i("div",{staticClass:"field"},[i("label",[e._v("Transport Protocol")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.form.protocol,expression:"form.protocol"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"protocol",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"udp"}},[e._v("UDP")]),i("option",{attrs:{value:"tcp"}},[e._v("TCP")])])]),i("div",{staticClass:"field"},[i("label",[e._v("Internal VPN network (private IP range, CIDR notation)")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.network,expression:"form.network"}],attrs:{placeholder:"Ex. 172.30.0.0/16",type:"text"},domProps:{value:e.form.network},on:{input:function(t){t.target.composing||e.$set(e.form,"network",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"fields"},[i("div",{staticClass:"eight wide field"},[i("label",[e._v("Certificate validity period")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.validity_time,expression:"form.validity_time"}],attrs:{min:"1",max:"1000",type:"number"},domProps:{value:e.form.validity_time},on:{input:function(t){t.target.composing||e.$set(e.form,"validity_time",t.target.value)}}})]),i("div",{staticClass:"eight wide field"},[i("label",[e._v("Time unit")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.form.validity_time_unit,expression:"form.validity_time_unit"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"validity_time_unit",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"days"}},[e._v("Days")]),i("option",{attrs:{value:"months"}},[e._v("Months")]),i("option",{attrs:{value:"years"}},[e._v("Years")])])])]),i("div",{staticClass:"field"},[i("div",{staticClass:"ui checked checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.deploy_dns,expression:"form.deploy_dns"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.deploy_dns)?e._i(e.form.deploy_dns,null)>-1:e.form.deploy_dns},on:{change:function(t){var i=e.form.deploy_dns,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);n.checked?r<0&&e.$set(e.form,"deploy_dns",i.concat([a])):r>-1&&e.$set(e.form,"deploy_dns",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.form,"deploy_dns",s)}}}),i("label",[e._v("Enable DNS server")])])])])},le=[],ce=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),ue=i("b5ae");function de(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ve(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?de(Object(i),!0).forEach((function(t){Object(ce["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):de(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function fe(e){return-1!==Y.a.indexOf(["days","months","years"],e)}var me,pe,he={name:"NewServerForm",data:function(){return{open:!1,form:{name:"",hostname:"",port:1194,protocol:"udp",network:"172.30.0.0/16",deploy_dns:!1,validity_time:1,validity_time_unit:"years"}}},validations:{form:{name:{required:ue["required"]},hostname:{required:ue["required"]},port:{required:ue["required"]},protocol:{required:ue["required"]},network:{required:ue["required"]},deploy_dns:{required:ue["required"]},validity_time:{minValue:Object(ue["minValue"])(1),maxValue:Object(ue["maxValue"])(1e3)},validity_time_unit:{timeUnitValid:fe}}},computed:{isValid:function(){return!this.$v.$invalid},value:function(){return ve({},this.form)}},mounted:function(){var e=this;this.$emit("formUpdated",this.isValid),this.$watch("isValid",(function(){e.$emit("formUpdated",e.isValid)}))}},be=he,ge=Object(O["a"])(be,oe,le,!1,null,"0cbf1288",null),_e=ge.exports,ye=(me=Object(j["a"])({components:{NewServerForm:_e},data:function(){return{open:!1,isValid:!1}}}),me(pe=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"toggle",value:function(){this.open=!0}},{key:"onFormUpdated",value:function(e){this.isValid=e}},{key:"onAccept",value:function(){this.$store.dispatch("addServer",this.$refs.form.value),this.open=!1}},{key:"onReject",value:function(){this.open=!1}}]),t}(j["b"]))||pe),je=ye,Ce=(i("cbea"),Object(O["a"])(je,ae,re,!1,null,"5601b971",null)),ke=Ce.exports,Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("New OpenVPN Client")]),i("sui-modal-content",[i("sui-container",[e.open?i("NewClientForm",{ref:"form",attrs:{servers:e.servers},on:{formUpdated:e.onFormUpdated}}):e._e()],1)],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:"",disabled:!e.isValid},on:{click:e.onAccept}},[e._v("OK")]),i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},we=[],Se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("label",[e._v("Server")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.form.server,expression:"form.server"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"server",t.target.multiple?i:i[0])}}},e._l(e.servers,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]),i("div",{staticClass:"field"},[i("label",[e._v("Client Name")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{placeholder:"Ex. 'My Home Server'",type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"fields"},[i("div",{staticClass:"eight wide field"},[i("label",[e._v("Certificate validity period")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.validity_time,expression:"form.validity_time"}],attrs:{min:"1",max:"1000",type:"number"},domProps:{value:e.form.validity_time},on:{input:function(t){t.target.composing||e.$set(e.form,"validity_time",t.target.value)}}})]),i("div",{staticClass:"eight wide field"},[i("label",[e._v("Time unit")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.form.validity_time_unit,expression:"form.validity_time_unit"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"validity_time_unit",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"days"}},[e._v("Days")]),i("option",{attrs:{value:"months"}},[e._v("Months")]),i("option",{attrs:{value:"years"}},[e._v("Years")])])])])])},$e=[];function Ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function De(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(i),!0).forEach((function(t){Object(ce["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function xe(e){return-1!==Y.a.indexOf(["days","months","years"],e)}var Pe,Ne,Ae,Re,Ve,Le,Fe,Ue,ze,Me,Te,qe,He,Ke,Be,Ie,Je,Ye,We,Ge,Xe,Qe,Ze,et,tt,it,nt={name:"NewClientForm",props:{servers:Array},data:function(){return{open:!1,form:{name:"",server:this.servers[0].id,validity_time:1,validity_time_unit:"years"}}},validations:{form:{name:{required:ue["required"]},validity_time:{minValue:Object(ue["minValue"])(1),maxValue:Object(ue["maxValue"])(1e3)},validity_time_unit:{timeUnitValid:xe}}},computed:{isValid:function(){return!this.$v.$invalid},value:function(){return De({},this.form)}},mounted:function(){var e=this;this.$emit("formUpdated",this.isValid),this.$watch("isValid",(function(){e.$emit("formUpdated",e.isValid)}))}},st=nt,at=Object(O["a"])(st,Se,$e,!1,null,"73324cb1",null),rt=at.exports,ot=(Pe=Object(j["a"])({components:{NewClientForm:rt},data:function(){return{open:!1,isValid:!1}}}),Pe(Ne=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"toggle",value:function(){this.open=!0}},{key:"onFormUpdated",value:function(e){this.isValid=e}},{key:"onAccept",value:function(){this.$store.dispatch("addClient",this.$refs.form.value),this.open=!1}},{key:"onReject",value:function(){this.open=!1}},{key:"servers",get:function(){return this.$store.state.servers}}]),t}(j["b"]))||Ne),lt=ot,ct=(i("2c4c"),Object(O["a"])(lt,Oe,we,!1,null,"27b67c94",null)),ut=ct.exports,dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("Deploy OpenVPN server")]),i("sui-modal-content",{ref:"outputContainer",attrs:{scrolling:""}},[i("sui-container",[i("div",{staticClass:"output"},e._l(e.output,(function(t,n){return i("div",{key:n},[e._v(e._s(t))])})),0)])],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:"",loading:e.isRunning,disabled:e.isRunning},on:{click:e.onDeploy}},[e._v("Deploy")]),e.finished?i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Close")]):i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},vt=[],ft=i("75fc"),mt=function(e){return new WebSocket(e)},pt=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mt;Object(h["a"])(this,e),this.output=[],this.createSocket=i,this.socket=null,this.onStart=null,this.onOutput=null,this.onFinish=null,this.hostname=t}return Object(b["a"])(e,[{key:"connect",value:function(e){if(null!=this.socket)throw Error("Already connected");this.socket=this.createSocket(e),this.socket.onopen=this._onOpen.bind(this),this.socket.onmessage=this._onMessage.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onerror=this._onError.bind(this)}},{key:"close",value:function(){this.socket&&this.socket.close()}},{key:"_onOpen",value:function(){var e={cmd:"start",args:{hostname:this.hostname}};this._sendJson(e)}},{key:"_onMessage",value:function(e){var t=JSON.parse(e.data);"running"===t.status&&t.output&&this.onOutput?this.onOutput(t.output):"start"===t.status&&this.onStart?this.onStart():"finished"===t.status&&this.onFinish&&this.onFinish()}},{key:"_onClose",value:function(){}},{key:"_onError",value:function(){}},{key:"_sendJson",value:function(e){var t=JSON.stringify(e);this.socket.send(t)}}]),e}(),ht=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mt;Object(h["a"])(this,e),this.output=[],this.createSocket=i,this.socket=null,this.onStart=null,this.onOutput=null,this.onFinish=null,this.onClose=null,this.onError=null,this.args=t}return Object(b["a"])(e,[{key:"connect",value:function(e){if(null!=this.socket)throw Error("Already connected");this.socket=this.createSocket(e),this.socket.onopen=this._onOpen.bind(this),this.socket.onmessage=this._onMessage.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onerror=this._onError.bind(this)}},{key:"close",value:function(){this.socket&&this.socket.close()}},{key:"_onOpen",value:function(){var e={cmd:"start",args:this.args};this._sendJson(e)}},{key:"_onMessage",value:function(e){var t=JSON.parse(e.data);"running"===t.status&&t.output&&this.onOutput?this.onOutput(t.output):"started"===t.status&&this.onStart?this.onStart():"finished"===t.status&&this.onFinish?this.onFinish():"error"===t.status&&this.onError&&this.onError()}},{key:"_onClose",value:function(){this.onClose&&this.onClose()}},{key:"_onError",value:function(){this.onError&&this.onError()}},{key:"_sendJson",value:function(e){var t=JSON.stringify(e);this.socket.send(t)}}]),e}(),bt=(Ae=Object(j["a"])({data:function(){return{isRunning:!1,finished:!1,open:!1,output:[]}}}),Ae(Re=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"show",value:function(e){this.isRunning=!1,this.output=[],this.process=null,this.server=e,this.open=!0}},{key:"onDeploy",value:function(){this.process=new pt(this.server.hostname),this.process.onStart=this.onStart,this.process.onFinish=this.onFinish,this.process.onOutput=this.onOutput,this.process.connect("ws://".concat(window.location.host,"/ws/deployment/")),this.isRunning=!0,this.finished=!1}},{key:"onReject",value:function(){this.open=!1,this.process&&this.process.close()}},{key:"onStart",value:function(){this.pushAutoScroll(["Deployment started","Ignore first '[ERROR]:' line - this is harmless Ansible bug. :o)"])}},{key:"onFinish",value:function(){this.pushAutoScroll(["Deployment finished."]),this.isRunning=!1,this.finished=!0}},{key:"onOutput",value:function(e){this.pushAutoScroll(e)}},{key:"pushAutoScroll",value:function(e){var t,i=this.$refs.outputContainer.$el,n=5,s=i.scrollTop>=i.scrollHeight-i.clientHeight-n;(t=this.output).push.apply(t,Object(ft["a"])(e)),s&&this.$nextTick((function(){i.scrollTop=i.scrollHeight-i.clientHeight}))}}]),t}(j["b"]))||Re),gt=bt,_t=(i("8ba9"),Object(O["a"])(gt,dt,vt,!1,null,"4cdeca36",null)),yt=_t.exports,jt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{staticClass:"kurwix",attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("Delete server?")]),i("sui-modal-content",[i("sui-container",[i("div",[e._v("\n                    Delete server "),i("b",[e._v(e._s(e.server.name)+" - "+e._s(e.server.hostname))]),e._v("? This will also delete all associated clients.\n                ")])])],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:""},on:{click:e.onAccept}},[e._v("OK")]),i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},Ct=[],kt=(Ve=Object(j["a"])({data:function(){return{server:{},open:!1}}}),Ve(Le=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"show",value:function(e){this.server=e,this.open=!0}},{key:"onAccept",value:function(){this.open=!1,this.$store.dispatch("deleteServer",this.server)}},{key:"onReject",value:function(){this.open=!1}}]),t}(j["b"]))||Le),Ot=kt,wt=(i("6c11"),Object(O["a"])(Ot,jt,Ct,!1,null,"0cf625a0",null)),St=wt.exports,$t=(Fe=Object(j["a"])({name:"Home",components:{NavigationBar:S,ConfigList:se,NewServerDialog:ke,NewClientDialog:ut,DeploymentDialog:yt,DeleteServerDialog:St}}),Fe(Ue=function(e){function t(){var e;return Object(h["a"])(this,t),e=Object(g["a"])(this,Object(_["a"])(t).call(this)),e.onClickedAddClient=e.onClickedAddClient.bind(Object(M["a"])(e)),e.onClickedAddServer=e.onClickedAddServer.bind(Object(M["a"])(e)),e.onClickedDeployServer=e.onClickedDeployServer.bind(Object(M["a"])(e)),e}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"onClickedAddClient",value:function(){this.$refs.newClientDialog.open=!0}},{key:"onClickedAddServer",value:function(){this.$refs.newServerDialog.open=!0}},{key:"onClickedDeployServer",value:function(e){this.$refs.deploymentDialog.show(e)}},{key:"onClickedDeleteServer",value:function(e){this.$refs.deleteServerDialog.show(e)}},{key:"mounted",value:function(){this.$root.$on(W,this.onClickedDeployServer),this.$root.$on(G,this.onClickedDeleteServer)}},{key:"beforeDestroy",value:function(){this.$root.$off(W,this.onClickedDeployServer),this.$root.$off(G,this.onClickedDeleteServer)}},{key:"servers",get:function(){return this.$store.state.servers}},{key:"clients",get:function(){return this.$store.state.clients}},{key:"isSuperuser",get:function(){return this.$store.getters.isSuperuser}},{key:"emailEnabled",get:function(){return this.$store.state.settings.email_enabled}}]),t}(j["b"]))||Ue),Et=$t,Dt=(i("21bb"),Object(O["a"])(Et,U,z,!1,null,null,null)),xt=Dt.exports,Pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings"},[i("sui-tab",{attrs:{menu:{vertical:!0,fluid:!0,tabular:!0}}},[i("sui-tab-pane",{attrs:{icon:"mail",title:"E-Mail"}},[i("EmailSettings")],1),i("sui-tab-pane",{attrs:{icon:"user",title:"Registration"}},[i("RegistrationSettings")],1),i("sui-tab-pane",{attrs:{icon:"filter",title:"DNS filtering"}},[i("DnsFilteringSettings")],1),i("sui-tab-pane",{attrs:{icon:"key",title:"SSH keys"}},[i("SshKeysSettings")],1)],1)],1)},Nt=[],At=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"content"},[i("div",{staticClass:"field"},[i("sui-message",{attrs:{info:""}},[e._v("\n                E-Mail settings are configured in "),i("span",{staticClass:"shell"},[e._v("${DATA_DIR}/data/settings.json")]),e._v(" and are used\n                to send logs, config files, etc. SMTP settings cannot be set here, but you can toggle e-mail sender.\n            ")])],1),i("div",{staticClass:"field"},[i("div",{staticClass:"ui checked checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.email_enabled,expression:"settings.email_enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.email_enabled)?e._i(e.settings.email_enabled,null)>-1:e.settings.email_enabled},on:{change:function(t){var i=e.settings.email_enabled,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);n.checked?r<0&&e.$set(e.settings,"email_enabled",i.concat([a])):r>-1&&e.$set(e.settings,"email_enabled",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.settings,"email_enabled",s)}}}),i("label",[e._v("Enable e-mail")])])]),e.settings.email_enabled?i("div",{staticClass:"field"},[i("div",{staticClass:"field"},[i("label",[e._v("From e-mail")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_from,expression:"readOnly.email_from"}],key:"email_from",attrs:{placeholder:"From for automated e-mails sent by this system",type:"text"},domProps:{value:e.readOnly.email_from},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_from",t.target.value)}}}),i("i",{staticClass:"user icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"fields"},[i("div",{staticClass:"twelve wide field"},[i("label",[e._v("SMTP server (only with TLS support)")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_smtp_server,expression:"readOnly.email_smtp_server"}],attrs:{placeholder:"Outgoing SMTP server",type:"text"},domProps:{value:e.readOnly.email_smtp_server},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_smtp_server",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"four wide field"},[i("label",[e._v("Port")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_smtp_port,expression:"readOnly.email_smtp_port"}],attrs:{placeholder:"Outgoing SMTP server port",min:"1",max:"65535",type:"number"},domProps:{value:e.readOnly.email_smtp_port},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_smtp_port",t.target.value)}}}),i("i",{staticClass:"lock icon",attrs:{"aria-hidden":"true"}})])])]),i("div",{staticClass:"field"},[i("label",[e._v("SMTP login")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_smtp_login,expression:"readOnly.email_smtp_login"}],attrs:{placeholder:"Outgoing SMTP server login (e-mail address)",type:"text"},domProps:{value:e.readOnly.email_smtp_login},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_smtp_login",t.target.value)}}}),i("i",{staticClass:"user icon",attrs:{"aria-hidden":"true"}})])]),e._m(0)]):e._e(),i("div",{staticClass:"field"},[i("button",{staticClass:"ui button settings-button",attrs:{type:"submit",role:"button"},on:{submit:function(e){}}},[e._v("Save")])])])])},Rt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"field"},[i("label",[e._v("SMTP password (hidden)")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{attrs:{value:"See settings.json",type:"text"}}),i("i",{staticClass:"lock icon",attrs:{"aria-hidden":"true"}})])])}],Vt=(ze=Object(j["a"])({name:"EmailSettings",components:{NavigationBar:S}}),ze((Te=function(e){function t(){var e,i;Object(h["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(g["a"])(this,(e=Object(_["a"])(t)).call.apply(e,[this].concat(s))),Object(ce["a"])(Object(M["a"])(i),"settings",{email_enabled:!1}),Object(ce["a"])(Object(M["a"])(i),"readOnly",{email_from:void 0,email_smtp_server:void 0,email_smtp_port:465,email_smtp_login:void 0,email_smtp_password:"never available in ui"}),i}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"handleSubmit",value:function(){this.$store.dispatch("setSettings",this.settings)}},{key:"mounted",value:function(){this.settings.email_enabled=Y.a.cloneDeep(this.$store.state.settings.email_enabled),this.readOnly=Y.a.cloneDeep(Y.a.pick(this.$store.state.settings,["email_from","email_smtp_server","email_smtp_port","email_smtp_login","email_smtp_password"]))}}]),t}(j["b"]),Me=Te))||Me),Lt=Vt,Ft=Object(O["a"])(Lt,At,Rt,!1,null,"762a6415",null),Ut=Ft.exports,zt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("div",{staticClass:"ui checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.registration_enabled,expression:"settings.registration_enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.registration_enabled)?e._i(e.settings.registration_enabled,null)>-1:e.settings.registration_enabled},on:{change:function(t){var i=e.settings.registration_enabled,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);n.checked?r<0&&e.$set(e.settings,"registration_enabled",i.concat([a])):r>-1&&e.$set(e.settings,"registration_enabled",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.settings,"registration_enabled",s)}}}),i("label",[e._v("New users registration")])])]),i("div",{staticClass:"field"},[i("button",{staticClass:"ui button settings-button",attrs:{type:"submit",role:"button"},on:{submit:function(e){}}},[e._v("Save")])])])])},Mt=[],Tt=(qe=Object(j["a"])({name:"RegistrationSettings"}),qe((Ke=function(e){function t(){var e,i;Object(h["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(g["a"])(this,(e=Object(_["a"])(t)).call.apply(e,[this].concat(s))),Object(ce["a"])(Object(M["a"])(i),"settings",{registration_enabled:void 0}),i}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"handleSubmit",value:function(){this.$store.dispatch("setSettings",this.settings)}},{key:"mounted",value:function(){this.settings=Y.a.cloneDeep(Y.a.pick(this.$store.state.settings,["registration_enabled","admin_activation_required"]))}}]),t}(j["b"]),He=Ke))||He),qt=Tt,Ht=Object(O["a"])(qt,zt,Mt,!1,null,"74d6e928",null),Kt=Ht.exports,Bt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("sui-message",{attrs:{info:""}},[i("p",[e._v("\n                Here you can select hosts lists for\n                "),i("a",{attrs:{href:"https://en.wikipedia.org/wiki/Ad_blocking#DNS_filtering",target:"_blank"}},[i("u",[i("b",[e._v("DNS ad blocking")])]),e._v(" "),i("i",{staticClass:"icon external alternate"})]),e._v("\n                (aka "),i("i",[e._v("DNS sinkhole")]),e._v("). Those lists are uploaded to VPN server when DNS deployment is enabled.\n            ")]),i("p",[e._v("\n                Servers are not automatically updated - only the internal database is. You must re-deploy servers to use updated lists.\n            ")]),i("p",[e._v("\n                Ping "),i("b",[e._v("gateway.vpnathome")]),e._v(" to see if your VPN DNS server is used. It should resolve to your deployed VPN gateway.\n            ")])])],1),e._l(e.list,(function(t){return i("div",{key:t.id,staticClass:"field"},[i("div",{staticClass:"ui checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.enabled,expression:"item.enabled"}],attrs:{disabled:e.isRunning,type:"checkbox"},domProps:{checked:Array.isArray(t.enabled)?e._i(t.enabled,null)>-1:t.enabled},on:{change:function(i){var n=t.enabled,s=i.target,a=!!s.checked;if(Array.isArray(n)){var r=null,o=e._i(n,r);s.checked?o<0&&e.$set(t,"enabled",n.concat([r])):o>-1&&e.$set(t,"enabled",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(t,"enabled",a)}}}),t.count?i("label",[e._v(e._s(t.url)+" ("+e._s(t.count)+" domains, "+e._s(e.formatTime(t))+")")]):i("label",[e._v(e._s(t.url))])])])})),i("div",{staticClass:"field"},[i("sui-button",{staticClass:"settings-button",attrs:{loading:e.isRunning,disabled:e.isRunning},on:{click:function(t){return t.preventDefault(),e.onClickedUpdate(t)}}},[e._v("Update")]),e.output?i("span",[e._v(e._s(e.output))]):e._e()],1)],2)},It=[],Jt=(Be=Object(j["a"])({name:"DnsFilteringSettings",data:function(){return{isRunning:!1,process:null,output:null}},computed:{list:function(){var e=Y.a.cloneDeep(this.$store.state.blockLists);return Y.a.forEach(e,(function(e){e._last_updated=I()(e.last_updated).fromNow()})),e}},methods:{formatTime:function(e){return e.last_updated?I()(e.last_updated).fromNow():""}}}),Be(Ie=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"onClickedUpdate",value:function(){this.process=new ht({sources:this.list}),this.process.onStart=this.onStartUpdate,this.process.onOutput=this.onOutput,this.process.onFinish=this.onFinishedUpdate,this.process.onClose=this.onFinishedUpdate,this.process.onError=this.onFinishedUpdate,this.process.connect("ws://".concat(window.location.host,"/ws/update_block_lists/")),this.isRunning=!0}},{key:"onStartUpdate",value:function(){this.isRunning=!0}},{key:"onOutput",value:function(e){this.output=Y.a.last(e)}},{key:"onFinishedUpdate",value:function(){this.isRunning=!1,this.$store.dispatch("getBlockListSources")}},{key:"handleSubmit",value:function(){this.$store.dispatch("setBlockListSources",this.list)}}]),t}(j["b"]))||Ie),Yt=Jt,Wt=Object(O["a"])(Yt,Bt,It,!1,null,"16447182",null),Gt=Wt.exports,Xt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("sui-message",{attrs:{info:""}},[e._v("\n            Your SSH deployment key is located in "),i("span",{staticClass:"shell"},[e._v("${DATA_DIR}/ssh/vpnathome_server_deployment_key.pub")]),e._v("."),i("br"),e._v("\n            Make sure you upload the public key to your target deployment server.\n        ")])],1),i("div",{staticClass:"field"},[i("label",[e._v("Public SSH deployment key (select all and copy)")]),i("div",{staticClass:"ui input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.sshPublicKey,expression:"sshPublicKey"}],attrs:{type:"text",readonly:""},domProps:{value:e.sshPublicKey},on:{input:function(t){t.target.composing||(e.sshPublicKey=t.target.value)}}})])])])},Qt=[],Zt=(Je=Object(j["a"])({name:"SshKeysSettings"}),Je(Ye=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"handleSubmit",value:function(){}},{key:"mounted",value:function(){this.$store.dispatch("getSshPublicKey")}},{key:"sshPublicKey",get:function(){return this.$store.state.sshPublicKey}}]),t}(j["b"]))||Ye),ei=Zt,ti=Object(O["a"])(ei,Xt,Qt,!1,null,"b0c2b0da",null),ii=ti.exports,ni=(We=Object(j["a"])({name:"Settings",components:{EmailSettings:Ut,RegistrationSettings:Kt,DnsFilteringSettings:Gt,SshKeysSettings:ii}}),We(Ge=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(_["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),t}(j["b"]))||Ge),si=ni,ai=(i("e1f2"),Object(O["a"])(si,Pt,Nt,!1,null,"e7a2053c",null)),ri=ai.exports,oi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login top-space"},[i("div",{staticClass:"ui grid center aligned"},[e._m(0),i("div",{staticClass:"row"},[i("div",{staticClass:"six wide column left aligned"},[i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("label",[e._v("Login E-mail")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"email",name:"login",placeholder:"E-mail"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),i("div",{staticClass:"field"},[i("label",{},[e._v("Password")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password (min 8 chars)"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),i("button",{staticClass:"ui button",attrs:{disabled:e.invalid}},[e._v("Login")])])])]),e.canRegister?i("div",{staticClass:"row center aligned"},[i("router-link",{attrs:{to:"/register"}},[e._v("Register")])],1):e._e(),e.error?i("div",{staticClass:"row center aligned"},[e._v("\n            Login failed\n        ")]):e._e()])])},li=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h1",{staticClass:"ui header green center aligned"},[e._v("Login"),i("br"),e._v("VPN@Home")])])}],ci=(Xe=Object(j["a"])({components:{},validations:{login:{required:ue["required"]},password:{required:ue["required"],minLength:Object(ue["minLength"])(8)}}}),Xe((Ze=function(e){function t(){var e,i;Object(h["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(g["a"])(this,(e=Object(_["a"])(t)).call.apply(e,[this].concat(s))),Object(ce["a"])(Object(M["a"])(i),"login",""),Object(ce["a"])(Object(M["a"])(i),"password",""),Object(ce["a"])(Object(M["a"])(i),"error",!1),i}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"handleSubmit",value:function(){var e=this;this.$api.login(this.login,this.password,(function(){e.$store.commit("login"),e.$store.dispatch("hydrate"),e.$router.push("/")}),(function(){e.error=!0}))}},{key:"invalid",get:function(){return this.$v.$invalid}},{key:"canRegister",get:function(){return this.$store.getters.canRegister}}]),t}(j["b"]),Qe=Ze))||Qe),ui=ci,di=(i("d6db"),Object(O["a"])(ui,oi,li,!1,null,null,null)),vi=di.exports,fi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login top-space"},[i("div",{staticClass:"ui grid center aligned"},[e._m(0),i("div",{staticClass:"row"},[i("div",{staticClass:"six wide column left aligned"},[i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("label",[e._v("Registration E-mail")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"email",name:"login",placeholder:"E-mail"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),i("div",{staticClass:"field"},[i("label",{},[e._v("Password")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password (min 8 chars)"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),i("button",{staticClass:"ui button",attrs:{disabled:e.invalid}},[e._v("Register")])])])]),i("div",{staticClass:"row center aligned"},[i("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1),e.error?i("div",{staticClass:"row center aligned"},[e._v("\n            Registration failed\n        ")]):e._e()])])},mi=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h1",{staticClass:"ui header green center aligned"},[e._v("Register"),i("br"),e._v("VPN@Home")])])}],pi=(et=Object(j["a"])({components:{},validations:{login:{required:ue["required"],email:ue["email"]},password:{required:ue["required"],minLength:Object(ue["minLength"])(8)}}}),et((it=function(e){function t(){var e,i;Object(h["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(g["a"])(this,(e=Object(_["a"])(t)).call.apply(e,[this].concat(s))),Object(ce["a"])(Object(M["a"])(i),"login",""),Object(ce["a"])(Object(M["a"])(i),"password",""),Object(ce["a"])(Object(M["a"])(i),"error",!1),i}return Object(y["a"])(t,e),Object(b["a"])(t,[{key:"handleSubmit",value:function(){var e=this;this.$api.register(this.login,this.password,(function(){e.$store.commit("login"),e.$store.dispatch("hydrate"),e.$router.push("/")}),(function(){e.error=!0}))}},{key:"invalid",get:function(){return this.$v.$invalid}}]),t}(j["b"]),tt=it))||tt),hi=pi,bi=(i("2cfd"),Object(O["a"])(hi,fi,mi,!1,null,null,null)),gi=bi.exports,_i=(i("6762"),i("2fdb"),i("2f62")),yi=i("bc3a"),ji=i.n(yi),Ci=i("a78e"),ki=i.n(Ci),Oi="/api/accounts/login/",wi="/api/accounts/register/",Si="/api/accounts/user/",$i="/api/accounts/logout/",Ei="/api/openvpn/servers/",Di="/api/openvpn/clients/",xi="/api/management/settings/",Pi=function(){function e(){Object(h["a"])(this,e)}return Object(b["a"])(e,[{key:"client",value:function(){var e=ki.a.get("csrftoken");return ji.a.create({headers:{"X-CSRFToken":e}})}},{key:"login",value:function(e,t,i,n){this.client().post(Oi,{email:e,password:t}).then((function(e){i()}),(function(e){n()}))}},{key:"register",value:function(e,t,i,n){this.client().post(wi,{email:e,password:t}).then((function(e){i()}),(function(e){n()}))}},{key:"logout",value:function(e){this.client().get($i).then((function(t){e()}))}},{key:"getUser",value:function(e,t){this.client().get(Si).then((function(t){return e(t.data)}),(function(e){return t()}))}},{key:"getServers",value:function(e,t){this.client().get(Ei).then((function(t){e(t.data)}),(function(e){t()}))}},{key:"addServer",value:function(e,t,i){this.client().post(Ei,e).then((function(e){return t(e.data)}),(function(e){return i()}))}},{key:"deleteServer",value:function(e,t,i){this.client().delete("/api/openvpn/servers/".concat(e.id,"/")).then((function(e){return t(e.data)}),(function(e){return i()}))}},{key:"getClients",value:function(e,t){this.client().get(Di).then((function(t){e(t.data)}),(function(e){t()}))}},{key:"addClient",value:function(e,t,i){var n="/api/openvpn/servers/".concat(e.server,"/clients/");this.client().post(n,e).then((function(e){return t(e.data)}),(function(e){return i()}))}},{key:"getSettings",value:function(e,t){this.client().get(xi).then((function(t){e(t.data)}),(function(e){t()}))}},{key:"setSettings",value:function(e,t,i){this.client().patch(xi,e).then((function(e){t()}),(function(e){i()}))}},{key:"sendClientConfig",value:function(e,t,i){var n="/api/openvpn/clients/".concat(e,"/send/");this.client().post(n,{}).then((function(i){return t(e)}),(function(t){return i(e)}))}},{key:"getBlockListSources",value:function(e,t){var i="/api/management/block_lists/";this.client().get(i).then((function(t){return e(t.data)}),(function(e){return t()}))}},{key:"setBlockListSources",value:function(e,t,i){var n="/api/management/block_lists/";this.client().put(n,e).then((function(e){return t()}),(function(e){return i()}))}},{key:"getSshPublicKey",value:function(e,t){var i="/api/management/ssh/public/";this.client().get(i).then((function(t){return e(t.data)}),(function(e){return t()}))}}]),e}();function Ni(e){e.prototype.$api=new Pi(Mi)}c["default"].use(_i["a"]);var Ai=void 0,Ri=new Pi,Vi={user:{authenticated:window.django.authenticated,email:"",permissions:[],superuser:!1},servers:[],clients:[],blockLists:[],sshPublicKey:"",status:{sendingClientConfigEmail:[],sendingServerConfigEmail:[],appNotReady:window.django.app_not_ready,blockLists:Ai},settings:{email_enabled:window.django.email_enabled,registration_enabled:window.django.registration_enabled}},Li={canRegister:function(e){return e.settings.registration_enabled},hasServer:function(e){return e.servers.length>0},isAuthenticated:function(e){return e.user.authenticated},isSuperuser:function(e){return e.user.superuser},hasPermission:function(e){return function(t){return Y.a.includes(e.user.permissions,t)}},isSendingClientConfigEmail:function(e){return function(t){return Y.a.includes(e.status.sendingClientConfigEmail,t)}},email:function(e){return e.user.email},canSendEmail:function(e){var t=e.settings,i=e.user;return function(e){return t.email_enabled&&(e===i.email||i.superuser)}}},Fi={login:function(e){e.user.authenticated=!0},logout:function(e){var t=Y.a.cloneDeep(Vi);Y.a.assign(e,t)},loginError:function(e){e.auth.error="Error"},setUser:function(e,t){e.user.email=t.email,e.user.permissions=t.permissions,e.user.superuser=Y.a.includes(t.permissions,"superuser")},setServers:function(e,t){e.servers=t},addServer:function(e,t){e.servers.push(t)},deleteServer:function(e,t){e.servers=Y.a.filter(e.servers,(function(e){return e.id!==t.id}))},setClients:function(e,t){e.clients=t},addClient:function(e,t){e.clients.push(t)},setSendingClientConfigEmail:function(e,t){e.status.sendingClientConfigEmail.push(t)},clearSendingClientConfigEmail:function(e,t){e.status.sendingClientConfigEmail=Y.a.filter(e.status.sendingClientConfigEmail,(function(e){return e!==t}))},setSettings:function(e,t){e.settings=t},setBlockListSources:function(e,t){e.blockLists=t},setSshPublicKey:function(e,t){e.sshPublicKey=t}},Ui={hydrate:function(e){var t=e.dispatch;t("getSettings"),t("getUser"),t("getServers"),t("getClients"),t("getBlockListSources")},getUser:function(e){var t=e.commit;Ri.getUser((function(e){return t("setUser",e)}),(function(e){}))},getServers:function(e){var t=e.commit;Ri.getServers((function(e){return t("setServers",e)}),(function(e){}))},getClients:function(e){var t=e.commit;Ri.getClients((function(e){return t("setClients",e)}),(function(e){}))},addServer:function(e,t){var i=e.commit;Ri.addServer(t,(function(e){return i("addServer",e)}),(function(e){}))},deleteServer:function(e,t){var i=e.dispatch;Ri.deleteServer(t,(function(e){i("getServers"),i("getClients")}),(function(e){}))},addClient:function(e,t){var i=e.commit;Ri.addClient(t,(function(e){return i("addClient",e)}),(function(e){}))},sendClientConfigEmail:function(e,t){var i=e.commit;i("setSendingClientConfigEmail",t),Ri.sendClientConfig(t,(function(e){return i("clearSendingClientConfigEmail",e)}),(function(e){return i("clearSendingClientConfigEmail",e)}))},setSettings:function(e,t){var i=e.commit;Ri.setSettings(t,(function(e){return i("setSettings",t)}),(function(e){}))},getSettings:function(e){var t=e.commit;Ri.getSettings((function(e){return t("setSettings",e)}),(function(e){}))},getBlockListSources:function(e){var t=e.commit;Ri.getBlockListSources((function(e){return t("setBlockListSources",e)}),(function(e){}))},setBlockListSources:function(e,t){var i=e.commit;Ri.setBlockListSources(t,(function(e){return i("setBlockListSources",t)}),(function(e){}))},getSshPublicKey:function(e){var t=e.commit;Ri.getSshPublicKey((function(e){return t("setSshPublicKey",e)}),(function(e){}))}},zi=new _i["a"].Store({state:Y.a.cloneDeep(Vi),getters:Li,mutations:Fi,actions:Ui}),Mi=zi;c["default"].use(F["a"]);var Ti="login",qi="register",Hi="home",Ki="settings",Bi=new F["a"]({routes:[{path:"/",name:Hi,component:xt},{path:"/login",name:Ti,component:vi,meta:{isPublic:!0,noNavbar:!0}},{path:"/register",name:qi,component:gi,meta:{isPublic:!0,noNavbar:!0}},{path:"/settings",name:Ki,component:ri}]});Bi.beforeEach((function(e,t,i){var n=!Mi.getters.isAuthenticated&&!e.meta.isPublic;n?i({path:"/login"}):i()}));var Ii=Bi,Ji=i("92d5"),Yi=i.n(Ji);c["default"].config.productionTip=!1,c["default"].use(Ni),c["default"].use(d.a),c["default"].use(Yi.a),Mi.state.status.appNotReady?new c["default"]({store:Mi,render:function(e){return e(L)}}).$mount("#app"):new c["default"]({router:Ii,store:Mi,render:function(e){return e(x)}}).$mount("#app")},"5a60":function(e,t,i){},"5c0b":function(e,t,i){"use strict";var n=i("e332"),s=i.n(n);s.a},"6c11":function(e,t,i){"use strict";var n=i("5a60"),s=i.n(n);s.a},"7a98":function(e,t,i){},"8ba9":function(e,t,i){"use strict";var n=i("9fb7"),s=i.n(n);s.a},"8d1e":function(e,t,i){},"950b":function(e,t,i){},"9fb7":function(e,t,i){},a997:function(e,t,i){"use strict";var n=i("dfc1"),s=i.n(n);s.a},a9e7:function(e,t,i){},b007:function(e,t,i){"use strict";var n=i("8d1e"),s=i.n(n);s.a},bc50:function(e,t,i){},cbea:function(e,t,i){"use strict";var n=i("367e"),s=i.n(n);s.a},d6db:function(e,t,i){"use strict";var n=i("a9e7"),s=i.n(n);s.a},dfc1:function(e,t,i){},e07e:function(e,t,i){},e1f2:function(e,t,i){"use strict";var n=i("950b"),s=i.n(n);s.a},e332:function(e,t,i){}});
//# sourceMappingURL=app.js.map